import requests
import argparse
from bs4 import BeautifulSoup

# usage
# python plateSearch.py -p plate -s state

plate = ''
state = ''
url = f'https://www.faxvin.com/license-plate-lookup/result?plate={plate}&state={state}'
usage = 'python plateSearch.py -p plate -s state'


parser = argparse.ArgumentParser(description='description')
parser.add_argument('-p', '--arg1', help='plate')
parser.add_argument('-s', '--arg2', help='state')
args = parser.parse_args()

if not (args.arg1 and args.arg2):
    print(f'Error. Usage:\n{usage}')
    exit()

plate = args.arg1
state = args.arg2

response = requests.get(url=url)

# print(response.content)

if response.status_code == 200:
    # Parse the HTML content
    soup = BeautifulSoup(response.text, 'html.parser')
    
    # Find the <main> tag
    # main_tag = soup.find('shortinfo')
    table = soup.find('table', class_='tableinfo base')
    # Check if <main> tag is found
    if table:
        print("<main> tag content:")
        print(table)
    else:
        print("No <main> tag found on the page.")
else:
    print("Failed to retrieve page. Status code:", response.status_code)