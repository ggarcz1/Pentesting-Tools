from cryptography.fernet import Fernet, InvalidToken
import  stdiomask, os, time

val = input('Press enter to enter key and decrypt file')  
# opening the encrypted file
with open('text_encrypted.txt', 'rb') as enc_file:
    encrypted = enc_file.read()

# decrypting the file
# user input for key 
k = stdiomask.getpass(prompt='Enter key: ', mask='*') 
   
decrypted = b'None'
try:
    fernet = Fernet(k)
    decrypted = fernet.decrypt(encrypted)     
except:
    print("Invalid Token")

with open('text_decrypted.txt', 'wb') as dec_file:
    dec_file.write(decrypted)

input('record relevant data then press enter to scrub file contents and delete.')
# add rand
with open('text_decrypted.txt', 'wb') as dec_file:
    dec_file.write(''.encode())

dec_file.close()
os.remove('text_decrypted.txt')
# catch exception statement here to prove file is actually deleted