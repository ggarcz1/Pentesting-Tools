import os
import scapy

# do arp -a on the current subnetwork  
devices = []
for device in os.popen('arp -a'):
    devices.append(device)
# match with regex 
print('Current IP:', devices[1][11:24])
for i in range(0, len(devices)):
    if devices[i][0:12] == '  192.168.1.':
        print(devices[i])

# arp scan subnet, ping MAY be blocked
ans, unans = srp(Ether(dst="ff:ff:ff:ff:ff:ff")/ARP(pdst="192.168.1.0/24"), timeout=2)
ans.summary(lambda s,r: r.sprintf("%Ether.src% %ARP.psrc%") )